/* concertina — Radix Accordion expand/collapse with scroll pinning support
 *
 * Add .concertina-content to your Accordion.Content elements.
 * The [data-switching] rules are managed automatically by useConcertina().
 */

.concertina-content {
  --concertina-open-duration: 200ms;
  --concertina-close-duration: 150ms;
  overflow: hidden;
}

.concertina-content[data-state="open"] {
  animation: concertina-open var(--concertina-open-duration) ease-out;
}

.concertina-content[data-state="closed"] {
  animation: concertina-close var(--concertina-close-duration) ease-out forwards;
}

@keyframes concertina-open {
  from {
    height: 0;
    opacity: 0;
  }
  to {
    height: var(--radix-accordion-content-height);
    opacity: 1;
  }
}

@keyframes concertina-close {
  from {
    height: var(--radix-accordion-content-height);
    opacity: 1;
  }
  to {
    height: 0;
    opacity: 0;
  }
}

/* When switching between items, run animations instantly so layout
   is in its final state for scroll pinning. Uses duration: 0s rather
   than animation: none to avoid re-triggering the close animation
   when data-switching is cleared after paint.
   data-switching is set by useConcertina(), cleared after paint. */
[data-switching] .concertina-content[data-state="closed"] {
  animation-duration: 0s;
}

[data-switching] .concertina-content[data-state="open"] {
  animation-duration: 0s;
}

/* StableSlot — all children overlap in the same grid cell.
   Grid auto-sizes to the largest child.
   Slots use flex-column so their content stretches to fill
   the reserved width — the visual footprint is constant. */
.concertina-stable-slot {
  display: grid;
}
.concertina-stable-slot > * {
  grid-area: 1 / 1;
  display: flex;
  flex-direction: column;
}

/* Gigbag — size-reserving container.
   contain isolates internal reflow from ancestors. */
.concertina-gigbag {
  contain: layout style;
}

/* Warmup — structural placeholder shimmer grid. */
.concertina-warmup {
  display: grid;
  gap: var(--concertina-warmup-gap, 0.75rem);
  contain: layout style;
}

.concertina-warmup-bone {
  height: var(--concertina-warmup-bone-height, 1rem);
  border-radius: var(--concertina-warmup-bone-radius, 0.25rem);
  background: var(--concertina-warmup-bone-color, #e5e7eb);
  animation: concertina-shimmer 1.5s ease-in-out infinite;
}

@keyframes concertina-shimmer {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.4; }
}

/* Glide — enter/exit animation wrapper. */
.concertina-glide {
  --concertina-glide-duration: 200ms;
}

.concertina-glide-entering {
  animation: concertina-glide-in var(--concertina-glide-duration) ease-out;
}

.concertina-glide-exiting {
  animation: concertina-glide-out var(--concertina-glide-duration) ease-out forwards;
}

@keyframes concertina-glide-in {
  from { opacity: 0; max-height: 0; overflow: hidden; }
  to   { opacity: 1; max-height: var(--concertina-glide-height, 1000px); overflow: hidden; }
}

@keyframes concertina-glide-out {
  from { opacity: 1; max-height: var(--concertina-glide-height, 1000px); overflow: hidden; }
  to   { opacity: 0; max-height: 0; overflow: hidden; }
}
